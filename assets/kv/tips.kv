#:import dp kivy.metrics.dp
#:import sp kivy.metrics.sp
#:import FitImage kivymd.uix.fitimage.FitImage

<TipsScreen>:
    MDScrollView:
        MDBoxLayout:
            orientation: "vertical"
            padding: dp(16)
            spacing: dp(16)
            size_hint_y: None
            height: self.minimum_height

            # Filtros
            MDBoxLayout:
                spacing: dp(10)
                size_hint_y: None
                height: dp(44)

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(88)
                    height: dp(40)
                    on_release: root.toggle_filter("Todos")
                    MDButtonText:
                        text: "Todos"

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(88)
                    height: dp(40)
                    on_release: root.toggle_filter("Básico")
                    MDButtonText:
                        text: "Básico"

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(100)
                    height: dp(40)
                    on_release: root.toggle_filter("Reciclaje")
                    MDButtonText:
                        text: "Reciclaje"

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(88)
                    height: dp(40)
                    on_release: root.toggle_filter("Agua")
                    MDButtonText:
                        text: "Agua"

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(88)
                    height: dp(40)
                    on_release: root.toggle_filter("Energía")
                    MDButtonText:
                        text: "Energía"

            # Segunda fila de filtros (para no apretar demasiado)
            MDBoxLayout:
                spacing: dp(10)
                size_hint_y: None
                height: dp(44)

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(100)
                    height: dp(40)
                    on_release: root.toggle_filter("Plantas")
                    MDButtonText:
                        text: "Plantas"

                MDButton:
                    style: "tonal"
                    size_hint: None, None
                    width: dp(100)
                    height: dp(40)
                    on_release: root.toggle_filter("Compost")
                    MDButtonText:
                        text: "Compost"

                Widget:

            # Destacado (hero)
            MDCard:
                radius: [16]
                padding: 0
                size_hint_y: None
                height: dp(200)

                FloatLayout:
                    FitImage:
                        # Cambia esto a una imagen real de tu proyecto
                        source: "assets/images/naturaleza.jpg"
                        allow_stretch: True
                        keep_ratio: False
                        size_hint: 1, 1

                    MDBoxLayout:
                        orientation: "vertical"
                        padding: dp(16)
                        size_hint: 1, None
                        height: dp(120)
                        pos_hint: {"x": 0, "y": 0}
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.4
                            Rectangle:
                                pos: self.pos
                                size: self.size

                        MDLabel:
                            text: "Guía de hábitos sustentables para tu día a día"
                            color: 1, 1, 1, 1
                            font_size: sp(18)
                            size_hint_y: None
                            halign: "left"
                            text_size: self.width, None
                            height: self.texture_size[1]
                            shorten: True
                            max_lines: 2

                        MDLabel:
                            text: "Consejos simples sobre reciclaje, agua, energía, plantas y compost para estudiantes."
                            color: 1, 1, 1, 1
                            font_size: sp(14)
                            size_hint_y: None
                            halign: "left"
                            text_size: self.width, None
                            height: self.texture_size[1]
                            shorten: True
                            max_lines: 3

            MDLabel:
                text: "Consejos recomendados para ti"
                font_size: sp(18)
                size_hint_y: None
                height: self.texture_size[1]

            # Lista de consejos (llenada desde Python)
            MDBoxLayout:
                id: tips_list
                orientation: "vertical"
                spacing: dp(16)
                size_hint_y: None
                height: self.minimum_height
